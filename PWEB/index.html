<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Masuk</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="login-page">

<div class="header">
    <img src="logo.jpg" alt="Logo">
    <span class="header-text">KONNI GROUP</span>
</div>

<!-- Audio Player -->
<audio id="audioElement" autoplay muted loop>
    <source src="background-music.mp3" type="audio/mpeg">
</audio>

<!-- Audio Control Button -->
<button id="audioBtn" class="audio-btn-small">ðŸ”Š</button>

<div class="container">
    <h2>Masuk Akun</h2>

    <!-- Flash message versi HTML biasa -->
    <div class="flash" id="flashMsg" style="display:none;">
        Username atau password salah
    </div>

    <form onsubmit="return validateForm()">
        <input 
            type="text" 
            name="username" 
            placeholder="Username" 
            required 
            minlength="3" 
            maxlength="20"
            pattern="[a-zA-Z0-9]+"
        >

        <input 
            type="password" 
            name="password" 
            placeholder="Password" 
            required
        >

        <button type="submit" class="btn">Masuk</button>
    </form>

    <p class="auth-link">Belum punya akun? <a href="register.html">Daftar di sini</a></p>
</div>

<script>
function validateForm() {
    const username = document.querySelector('input[name="username"]').value;

    if (!/^[a-zA-Z0-9]{3,20}$/.test(username)) {
        showFlash("Username tidak valid.");
        return false;
    }

    // Redirect to home page
    window.location.href = 'home.html';
    return false;
}

function showFlash(message) {
    const flash = document.getElementById("flashMsg");
    flash.innerText = message;
    flash.style.display = "flex";
}

// Audio Control
const audioBtn = document.getElementById('audioBtn');
const audioElement = document.getElementById('audioElement');

// Function to play audio
function playAudio() {
    audioElement.muted = false;
    const playPromise = audioElement.play();
    
    if (playPromise !== undefined) {
        playPromise.then(function() {
            audioBtn.textContent = 'ðŸ”‡';
            audioBtn.classList.add('playing');
        }).catch(function(error) {
            console.log('Play error:', error);
        });
    }
}

audioBtn.addEventListener('click', function() {
    if (audioElement.paused) {
        playAudio();
    } else {
        audioElement.pause();
        audioBtn.textContent = 'ðŸ”Š';
        audioBtn.classList.remove('playing');
    }
});

// Auto play when page loads
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        playAudio();
    }, 500);
});

// Also try on user interaction as fallback
document.addEventListener('click', function() {
    if (audioElement.paused) {
        playAudio();
    }
}, {once: true});
</script>

</body>
</html>
