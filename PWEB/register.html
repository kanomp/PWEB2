<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Daftar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="register-page">

<div class="header">
    <img src="logo.jpg" alt="Logo">
    <span class="header-text">KONNI GROUP</span>
</div>

<!-- Audio Player -->
<audio id="audioElement" autoplay muted loop>
    <source src="background-music.mp3" type="audio/mpeg">
</audio>

<!-- Audio Control Button -->
<button id="audioBtn" class="audio-btn-small">ðŸ”Š</button>

<div class="container">
    <h2>Daftar Akun</h2>

    <!-- Flash message versi HTML biasa -->
    <div class="flash" id="flashMsg" style="display:none;">
        Error message
    </div>

    <form onsubmit="return validateRegisterForm()">
        <input 
            type="text" 
            name="username" 
            placeholder="Username" 
            required 
            minlength="3" 
            maxlength="20"
            pattern="[a-zA-Z0-9]+"
        >

        <input 
            type="email" 
            name="email" 
            placeholder="Email" 
            required
        >

        <input 
            type="password" 
            name="password" 
            placeholder="Password" 
            required
            minlength="6"
        >

        <input 
            type="password" 
            name="confirmPassword" 
            placeholder="Konfirmasi Password" 
            required
            minlength="6"
        >

        <button type="submit" class="btn">Daftar</button>
    </form>

    <p class="auth-link">Sudah punya akun? <a href="home.html">Masuk di sini</a></p>
</div>

<script>
function validateRegisterForm() {
    const username = document.querySelector('input[name="username"]').value;
    const email = document.querySelector('input[name="email"]').value;
    const password = document.querySelector('input[name="password"]').value;
    const confirmPassword = document.querySelector('input[name="confirmPassword"]').value;

    if (!/^[a-zA-Z0-9]{3,20}$/.test(username)) {
        showFlash("Username harus 3-20 karakter, hanya huruf dan angka.");
        return false;
    }

    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showFlash("Email tidak valid.");
        return false;
    }

    if (password.length < 6) {
        showFlash("Password minimal 6 karakter.");
        return false;
    }

    if (password !== confirmPassword) {
        showFlash("Password dan konfirmasi password tidak cocok.");
        return false;
    }

    return true;
}

function showFlash(message) {
    const flash = document.getElementById("flashMsg");
    flash.innerText = message;
    flash.style.display = "flex";
}

// Audio Control
const audioBtn = document.getElementById('audioBtn');
const audioElement = document.getElementById('audioElement');

// Function to play audio
function playAudio() {
    audioElement.muted = false;
    const playPromise = audioElement.play();
    
    if (playPromise !== undefined) {
        playPromise.then(function() {
            audioBtn.textContent = 'ðŸ”‡';
            audioBtn.classList.add('playing');
        }).catch(function(error) {
            console.log('Play error:', error);
        });
    }
}

audioBtn.addEventListener('click', function() {
    if (audioElement.paused) {
        playAudio();
    } else {
        audioElement.pause();
        audioBtn.textContent = 'ðŸ”Š';
        audioBtn.classList.remove('playing');
    }
});

// Auto play when page loads
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        playAudio();
    }, 500);
});

// Also try on user interaction as fallback
document.addEventListener('click', function() {
    if (audioElement.paused) {
        playAudio();
    }
}, {once: true});
</script>

</body>
</html>
